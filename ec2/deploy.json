{
    "Description": "Create an EC2 instance running the Amazon Linux 32 bit AMI.",
    "Parameters": {
        "KeyPair": {
            "Description": "The EC2 Key Pair to allow SSH access to the instance",
            "Type": "String",
            "Default": {
                "Ref": "KeyPair"
            }
        }
    },
    "Resources": {
        "MyIamInstanceProfile": {
            "Type": "AWS::IAM::InstanceProfile",
            "Properties": {
                "InstanceProfileName": "MyIamInstanceProfile",
                "Path": "/",
                "Roles": [
                    "MyAdminRole"
                ]
            },
            "Tags": [
                {
                    "created_timestamp": 1646300565,
                    "last_modified_timestamp": 1646300565,
                    "resource_name": "MyIamInstanceProfile",
                    "resource_type": "AWS::IAM::InstanceProfile",
                    "file_path": "/tmp/tmppo4czohi/ec2/deploy.json",
                    "prancer_unique_id": "a7ad9560-0bae-41d4-8fd7-3ff7be9fd91b"
                }
            ]
        },
        "Ec2Instance": {
            "Type": "AWS::EC2::Instance",
            "Properties": {
                "KeyName": {
                    "Ref": "KeyPair"
                },
                "ImageId": "ami-3b355a52",
                "IamInstanceProfile": {
                    "Arn": {
                        "Fn::GetAtt": [
                            "MyIamInstanceProfile",
                            "Arn"
                        ]
                    }
                }
            },
            "Tags": [
                {
                    "created_timestamp": 1646300565,
                    "last_modified_timestamp": 1646300565,
                    "resource_name": "Ec2Instance",
                    "resource_type": "AWS::EC2::Instance",
                    "file_path": "/tmp/tmppo4czohi/ec2/deploy.json",
                    "prancer_unique_id": "4e8a71e3-81e4-4018-b897-2252f8929573"
                }
            ]
        }
    },
    "Outputs": {
        "InstanceId": {
            "Description": "The InstanceId of the newly created EC2 instance",
            "Value": {
                "Ref": "Ec2Instance"
            }
        }
    },
    "AWSTemplateFormatVersion": "2010-09-09"
}