AWSTemplateFormatVersion: '2010-09-09'
Description: MSK Cluster with all properties
Parameters:
  SubnetIds:
    Type: List<AWS::EC2::Subnet::Id>
    Default: !Ref 'SubnetIds'
  SecurityGroups:
    Type: List<AWS::EC2::SecurityGroup::Id>
    Default: !Ref 'SecurityGroups'
Resources:
  TestCluster:
    Type: AWS::MSK::Cluster
    Properties:
      ClusterName: ClusterWithAllProperties
      KafkaVersion: 2.2.1
      NumberOfBrokerNodes: 3
      EnhancedMonitoring: PER_BROKER
      EncryptionInfo:
        EncryptionAtRest:
          DataVolumeKMSKeyId: ''
        EncryptionInTransit:
          ClientBroker: PLAINTEXT
          InCluster: false
      Tags:
        - {}
        - Key: created_timestamp
          Value: 1646386203
        - Key: last_modified_timestamp
          Value: 1651757277
        - Key: resource_name
          Value: TestCluster
        - Key: resource_type
          Value: AWS::MSK::Cluster
        - Key: prancer_unique_id
          Value: e6a628b0-924e-426e-8c3c-0672796e435e
      BrokerNodeGroupInfo:
        BrokerAZDistribution: DEFAULT
        InstanceType: kafka.m5.large
        SecurityGroups: !Ref 'SecurityGroups'
        StorageInfo:
          EBSStorageInfo:
            VolumeSize: 100
        ClientSubnets: !Ref 'SubnetIds'
